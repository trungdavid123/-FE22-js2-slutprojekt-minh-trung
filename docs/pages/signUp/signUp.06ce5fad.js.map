{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aCAA,MAAMC,EAAmBC,SAASC,cAAc,YAEnCC,EAAWC,IACtBJ,EAAiBK,UAAY,GAE7B,MAWMC,EAAU,80CAGXF,gCAILJ,EAAiBK,WAAaC,CAAA,E,iBDThC,MAAMC,GAAO,EAAAT,EAAAU,WACPC,GAAU,EAAAC,EAAAC,cACVC,EAAaX,SAASY,eAAe,SACrCC,EAAgBb,SAASY,eAAe,YACxCE,EAAkBd,SAASY,eAAe,eAC1CG,EAAWf,SAASC,cAAc,cAClCe,EAAoBhB,SAASiB,iBAAiB,oBAC9CC,EAASlB,SAASC,cAAc,WACtC,IAAIkB,EAAqB,GACzB,MAAMC,GAAK,EAAAC,EAAAC,gBAGXJ,GAAQK,iBAAiB,SAAS,KAC9B,MAAMC,EAAQb,GAAYc,MACpBC,EAAWb,GAAeY,MAC1BE,EAAab,GAAiBW,MAEpC,OAAKD,GAAUE,EAIXA,IAAaC,EAAmBzB,EAAQ,0BAEvCa,EAASa,OAAOC,YAIrB,EAAAhC,EAAAiC,gCAA+BxB,EAAMkB,EAAOE,GACvCK,MAAMC,IACHC,QAAQC,IAAIF,GACZ,MAAMG,EAAOH,EAAKG,KACZC,GAAW,EAAAf,EAAAgB,YAAWjB,EAAI,SAEhCkB,aAAaC,QAAQ,OAAQC,KAAKC,UAAUN,KAC5C,EAAAd,EAAAqB,QAAON,EAAU,CACbO,GAAIR,EAAKS,IACTC,KAAMV,EAAKW,YACXtB,MAAOW,EAAKX,MACZuB,SAAUZ,EAAKY,SACfC,WAA2B,4BAAfb,EAAKX,QAGrByB,EAAYd,EAAKS,IAAG,IAEvBM,OAAOC,IACJjD,EAAQiD,EAAIC,QAAO,IArBhBlD,EAAQ,0BANRA,EAAQ,yCA4Bf,IAKRa,EAASQ,iBAAiB,UAAW8B,IACjC,MAAMC,EAASD,EAAEC,OAEjB,IAAKA,EAAO1B,OAAOC,QAA8B,IAApBV,EAASU,OAClC,OAEJ,MAAM0B,EAAOD,EAAO1B,MACpB,IAAK,IAAI4B,EAAI,EAAGA,EAAID,EAAK1B,OAAQ2B,IAAK,CAClCrC,EAASsC,KAAKF,EAAKC,IACsBxC,EAAkBG,EAASU,OAAS,GAC5D6B,IAAMC,IAAIC,gBAAgBL,EAAKC,GACpD,KAIJ,MAAMP,EAAeN,IACjBxB,EAAS0C,SAASN,IACd,MAAMO,GAAW,EAAArD,EAAAsD,KAAIvD,EAAS,SAASmC,YAAaY,EAAKV,SACzD,EAAApC,EAAAuD,aAAYF,EAAUP,GAAMxB,MAAK,KAC7BkC,OAAOC,SAASC,KAAO,mBAAmB,GAC9C,GACJ","sources":["src/pages/signUp/app.ts","src/utils/showMsg.ts"],"sourcesContent":["import { getAuth, createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport { getStorage, ref, uploadBytes } from \"firebase/storage\";\r\nimport { showMsg } from '../../utils/showMsg';\r\nimport { addDoc, collection, getFirestore } from 'firebase/firestore';\r\n\r\ntype MyFile = {\r\n    name: string;\r\n    lastModified: number;\r\n    lastModifiedDate?: Date;\r\n    webkitRelativePath: string;\r\n    size: number;\r\n    type: string;\r\n  }\r\n\r\nconst auth = getAuth();\r\nconst storage = getStorage();\r\nconst emailInput = document.getElementById('email') as HTMLInputElement;\r\nconst passwordInput = document.getElementById('password') as HTMLInputElement;\r\nconst rePasswordInput = document.getElementById('re-password') as HTMLInputElement;\r\nconst imgInput = document.querySelector('.img-input') as HTMLInputElement;\r\nconst placeholderImages = document.querySelectorAll('.placeholder-img') as NodeListOf<HTMLImageElement>;\r\nconst submit = document.querySelector('.submit');\r\nlet fileList: MyFile[] = [];\r\nconst db = getFirestore();\r\n\r\n\r\nsubmit?.addEventListener('click', () => {\r\n    const email = emailInput?.value;\r\n    const password = passwordInput?.value;\r\n    const rePassword = rePasswordInput?.value;\r\n\r\n    if (!email || !password) {\r\n        return showMsg('Please enter a valid email or password');\r\n    }\r\n\r\n    if (password !== rePassword) return showMsg('Passwords do not match');\r\n\r\n    if (!imgInput.files?.length) {\r\n        return showMsg('Please select 3 images');\r\n    }\r\n\r\n    createUserWithEmailAndPassword(auth, email, password)\r\n        .then((cred) => {\r\n            console.log(cred);\r\n            const user = cred.user;\r\n            const usersRef = collection(db, 'users');\r\n\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            addDoc(usersRef, {\r\n                id: user.uid,\r\n                name: user.displayName,\r\n                email: user.email,\r\n                photoURL: user.photoURL,\r\n                isSuggsted: user.email === 'trungdavid969@gmail.com' ? true : false\r\n            })\r\n\r\n            uploadFiles(user.uid);\r\n        })\r\n        .catch((err) => {\r\n            showMsg(err.message)\r\n        })\r\n\r\n})\r\n\r\n\r\nimgInput.addEventListener('change', (e: Event) => {\r\n    const target = e.target as HTMLInputElement;\r\n\r\n    if (!target.files?.length || fileList.length === 3) {\r\n        return;\r\n    }\r\n    const file = target.files;\r\n    for (var i = 0; i < file.length; i++) {\r\n        fileList.push(file[i]);\r\n        let placeholderImage: HTMLImageElement = placeholderImages[fileList.length - 1];\r\n        placeholderImage.src = URL.createObjectURL(file[i]);\r\n    }\r\n})\r\n\r\n\r\nconst uploadFiles = (id: string) => {\r\n    fileList.forEach((file: any) => {\r\n        const imageRef = ref(storage, `users/${id}/images/${file.name}`)\r\n        uploadBytes(imageRef, file).then(() => {\r\n            window.location.href = `../home/home.html`;\r\n        })\r\n    })\r\n}\r\n\r\n\r\n\r\n","const messageContainer = document.querySelector('.message') as HTMLElement;\r\n\r\nexport const showMsg = (msg: string) => {\r\n  messageContainer.innerHTML = \"\";\r\n\r\n  const icon = `<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\r\n    <symbol id=\"check-circle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/>\r\n    </symbol>\r\n    <symbol id=\"info-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>\r\n    </symbol>\r\n    <symbol id=\"exclamation-triangle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\r\n    </symbol>\r\n  </svg>`\r\n  const element = `${icon}<div class=\"alert alert-warning d-flex align-items-center mt-5\" role=\"alert\">\r\n    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\" aria-label=\"Warning:\"><use xlink:href=\"#exclamation-triangle-fill\"/></svg>\r\n    <div>\r\n     ${msg}      \r\n    </div>\r\n  </div>`;\r\n\r\n  messageContainer.innerHTML += element;\r\n}"],"names":["$6AR8M","parcelRequire","$350e32bf48254077$var$messageContainer","document","querySelector","$350e32bf48254077$export$ebff25aed703e461","msg","innerHTML","element","$7694ed30bbd3d77b$var$auth","getAuth","$7694ed30bbd3d77b$var$storage","$fCOdq","getStorage","$7694ed30bbd3d77b$var$emailInput","getElementById","$7694ed30bbd3d77b$var$passwordInput","$7694ed30bbd3d77b$var$rePasswordInput","$7694ed30bbd3d77b$var$imgInput","$7694ed30bbd3d77b$var$placeholderImages","querySelectorAll","$7694ed30bbd3d77b$var$submit","$7694ed30bbd3d77b$var$fileList","$7694ed30bbd3d77b$var$db","$ilpIi","getFirestore","addEventListener","email","value","password","rePassword","files","length","createUserWithEmailAndPassword","then","cred","console","log","user","usersRef","collection","localStorage","setItem","JSON","stringify","addDoc","id","uid","name","displayName","photoURL","isSuggsted","$7694ed30bbd3d77b$var$uploadFiles","catch","err","message","e","target","file","i","push","src","URL","createObjectURL","forEach","imageRef","ref","uploadBytes","window","location","href"],"version":3,"file":"signUp.06ce5fad.js.map"}