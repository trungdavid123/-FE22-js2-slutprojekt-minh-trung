{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAA,MAAMC,EAAmBC,SAASC,cAAc,YAEnCC,EAAWC,IACtBJ,EAAiBK,UAAY,GAE7B,MAWMC,EAAU,80CAGXF,gCAILJ,EAAiBK,WAAaC,CAAA,E,iBDnBhC,MAAMC,EAAYN,SAASO,eAAe,cACpCC,EAAaR,SAASO,eAAe,eACrCE,EAAgBT,SAASO,eAAe,kBACxCG,EAAQV,SAASC,cAAc,WAC/BU,GAAO,EAAAd,EAAAe,WACPC,EAAW,IAAI,EAAAhB,EAAAiB,oBACfC,GAAK,EAAAC,EAAAC,gBACLC,EAAOC,aAAaC,QAAQ,QAIlCd,GAAWe,iBAAiB,SAAS,KACnC,MAAMC,EAAQd,EAAWe,MACnBC,EAAWf,EAAcc,OAE/B,EAAA1B,EAAA4B,4BAA2Bd,EAAMW,EAAOE,GACrCE,MAAMC,IACLC,QAAQC,IAAI,mBAAoBF,GAChC,MAAMG,EAAOH,EAAKG,KAElBX,aAAaY,QAAQ,OAAQC,KAAKC,UAAUH,IAC5CI,OAAOC,SAASC,KAAO,4BAExBC,OAAM,KACLnC,EAAQ,4CACV,IAGJQ,EAAMW,iBAAiB,SAAS,MAC9B,EAAAxB,EAAAyC,iBAAgB3B,EAAME,GACnBa,MAAKa,MAAOC,IACX,MAAMV,EAAOU,EAAOV,KACdW,EAASzC,SAASC,cAAc,WAChCyC,EAAU1C,SAASC,cAAc,mBACjC0C,GAAW,EAAA3B,EAAA4B,YAAW7B,EAAI,SAC1B8B,GAAa,EAAA7B,EAAA8B,KAAIH,EAAUb,EAAKiB,MAEtC,EAAA/B,EAAAgC,QAAOH,EAAY,CACjBvB,MAAOQ,EAAKR,MACZ2B,YAAanB,EAAKmB,YAClBC,SAAUpB,EAAKoB,SACfC,YAA4B,4BAAfrB,EAAKR,QAGpBmB,EAAOW,MAAMC,QAAU,QACvBX,EAAQU,MAAMC,QAAU,QAExBlC,aAAaY,QAAQ,OAAQC,KAAKC,UAAUH,IAC5CF,QAAQC,IAAI,mBAAoBC,GAGhCwB,YAAW,KACTb,EAAOW,MAAMC,QAAU,OACvBX,EAAQU,MAAMC,QAAU,OACxBnB,OAAOC,SAASC,KAAO,2BACtB,QAEFC,OAAM,KACPnC,EAAQ,0BACV,IAIAgB,IAAMgB,OAAOC,SAASC,KAAO","sources":["src/login.ts","src/utils/showMsg.ts"],"sourcesContent":["import { getAuth, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\nimport { showMsg } from \"./utils/showMsg\";\r\nimport { collection, doc, getFirestore, setDoc } from \"firebase/firestore\";\r\n\r\nconst submitBtn = document.getElementById(\"submit-btn\") as HTMLButtonElement;\r\nconst emailInput = document.getElementById(\"email-input\") as HTMLInputElement;\r\nconst passwordInput = document.getElementById(\"password-input\") as HTMLInputElement;\r\nconst ggBtn = document.querySelector(\".gg-btn\") as HTMLButtonElement;\r\nconst auth = getAuth();\r\nconst provider = new GoogleAuthProvider();\r\nconst db = getFirestore();\r\nconst user = localStorage.getItem('user');\r\n\r\n\r\n\r\nsubmitBtn?.addEventListener('click', () => {\r\n  const email = emailInput.value;\r\n  const password = passwordInput.value;\r\n\r\n  signInWithEmailAndPassword(auth, email, password)\r\n    .then((cred) => {\r\n      console.log(\"User logged in: \", cred);\r\n      const user = cred.user;\r\n\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      window.location.href = './pages/home/home.html'\r\n    })\r\n    .catch(() => {\r\n      showMsg('Please enter a valid email or password')\r\n    })\r\n});\r\n\r\nggBtn.addEventListener('click', () => {\r\n  signInWithPopup(auth, provider)\r\n    .then(async (result) => {\r\n      const user = result.user;\r\n      const blurBg = document.querySelector('.shadow') as HTMLElement;\r\n      const spinner = document.querySelector('.spinner-border') as HTMLElement;\r\n      const usersRef = collection(db, \"users\");\r\n      const userDocRef = doc(usersRef, user.uid);\r\n\r\n      setDoc(userDocRef, {\r\n        email: user.email,\r\n        displayName: user.displayName,\r\n        photoURL: user.photoURL,\r\n        isSuggested: user.email === 'trungdavid969@gmail.com' ? true : false\r\n      })\r\n\r\n      blurBg.style.display = 'block';\r\n      spinner.style.display = 'block';\r\n\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      console.log(\"User logged in: \", user);\r\n\r\n\r\n      setTimeout(() => {\r\n        blurBg.style.display = 'none';\r\n        spinner.style.display = 'none';\r\n        window.location.href = './pages/home/home.html'\r\n      }, 2000)\r\n\r\n    }).catch(() => {\r\n      showMsg('Something went wrong');\r\n    })\r\n});\r\n\r\n\r\nif (user) window.location.href = './pages/home/home.html';","const messageContainer = document.querySelector('.message') as HTMLElement;\r\n\r\nexport const showMsg = (msg: string) => {\r\n  messageContainer.innerHTML = \"\";\r\n\r\n  const icon = `<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\r\n    <symbol id=\"check-circle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/>\r\n    </symbol>\r\n    <symbol id=\"info-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>\r\n    </symbol>\r\n    <symbol id=\"exclamation-triangle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\r\n    </symbol>\r\n  </svg>`\r\n  const element = `${icon}<div class=\"alert alert-warning d-flex align-items-center mt-5\" role=\"alert\">\r\n    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\" aria-label=\"Warning:\"><use xlink:href=\"#exclamation-triangle-fill\"/></svg>\r\n    <div>\r\n     ${msg}      \r\n    </div>\r\n  </div>`;\r\n\r\n  messageContainer.innerHTML += element;\r\n}"],"names":["$6AR8M","parcelRequire","$350e32bf48254077$var$messageContainer","document","querySelector","$350e32bf48254077$export$ebff25aed703e461","msg","innerHTML","element","$7470af51a12fb8d8$var$submitBtn","getElementById","$7470af51a12fb8d8$var$emailInput","$7470af51a12fb8d8$var$passwordInput","$7470af51a12fb8d8$var$ggBtn","$7470af51a12fb8d8$var$auth","getAuth","$7470af51a12fb8d8$var$provider","GoogleAuthProvider","$7470af51a12fb8d8$var$db","$ilpIi","getFirestore","$7470af51a12fb8d8$var$user","localStorage","getItem","addEventListener","email","value","password","signInWithEmailAndPassword","then","cred","console","log","user","setItem","JSON","stringify","window","location","href","catch","signInWithPopup","async","result","blurBg","spinner","usersRef","collection","userDocRef","doc","uid","setDoc","displayName","photoURL","isSuggested","style","display","setTimeout"],"version":3,"file":"index.4bec1e97.js.map"}